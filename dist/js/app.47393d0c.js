(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,h=[];d<o.length;d++)s=o[d],i[s]&&h.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var p=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"003c":function(e,t){},"00aa":function(e,t,a){"use strict";var n=a("e4bd"),i=a.n(n);i.a},"0195":function(e,t,a){"use strict";var n=a("745e"),i=a.n(n);i.a},1:function(e,t){},"1f0e":function(e,t,a){"use strict";var n=a("56bb"),i=a.n(n);i.a},"1f78":function(e,t,a){"use strict";var n=a("ac4f"),i=a.n(n);i.a},2:function(e,t){},2096:function(e,t,a){},"2ca6":function(e,t,a){},3:function(e,t){},"3c5b":function(e,t,a){"use strict";var n=a("3e0c"),i=a.n(n);i.a},"3e0c":function(e,t,a){},4:function(e,t){},4212:function(e,t,a){},4329:function(e,t,a){"use strict";var n=a("2ca6"),i=a.n(n);i.a},4679:function(e,t,a){},"56bb":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("ac4d"),a("8a81"),a("cadf"),a("551c"),a("f751"),a("097d");var n=a("a026"),i=a("e508"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("router-view")],1)],1)},s=[],o={props:{source:String}},l=o,c=a("2877"),p=Object(c["a"])(l,r,s,!1,null,null,null),d=p.exports,h=a("8c4f"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("app-snackbar"),this.toolbar?a("app-toolbar"):e._e(),a("app-tools"),a("app-view"),a("app-studio"),this.footer?a("app-lower-toolbar"):e._e()],1)},m=[],y=a("cebc"),f=a("2f62"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{staticClass:"light",attrs:{fixed:"",app:"",dense:"","clipped-right":"","clipped-left":""}},[a("div",{attrs:{id:"toolbar-toggle"}},[a("v-toolbar-side-icon",{attrs:{left:""},on:{click:e.onToolsClick}},[a("v-icon",{attrs:{color:"deep-purple"}},[e._v("menu")])],1)],1),a("v-toolbar-title",{staticClass:"deep-purple--text font-weight-black",attrs:{router:"",to:"/",id:"toolbar-title"}},[e._v("\n    PheW\n  ")]),a("app-load-data"),a("div",{attrs:{id:"file-name"}},[a("span",{},[e._v(e._s(e.fileName))])]),a("v-spacer"),a("app-zoomer"),a("app-view-manager"),a("v-toolbar-side-icon",{on:{click:e.onStudioClick}},[a("v-icon",{attrs:{color:"deep-purple"}},[e._v("menu")])],1)],1)},v=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("upload-btn",{attrs:{uniqueId:"",title:e.title,color:"light",icon:""},on:{"file-update":e.readDataFile}},[a("template",{slot:"icon"},[a("v-icon",{attrs:{color:"deep-purple"}},[e._v("file_upload")])],1)],2)},w=[],x=a("82e0"),k=a.n(x),G={name:"LoadData",components:{"upload-btn":k.a},props:{uniqueId:String,default:function(){return""}},methods:Object(y["a"])({},Object(f["b"])({readDataFile:"backend/readDataFile"})),computed:{title:function(){return this.uniqueId||"UploadData"}}},S=G,D=Object(c["a"])(S,b,w,!1,null,null,null),j=D.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("number-input-spinner",{ref:"spinner",attrs:{min:0,max:e.maxDisplayedGlyphs,value:e.selectedNumGlyphs,inputClass:"mine__input",buttonClass:"mine__button"},model:{value:e.selectedNumGlyphs,callback:function(t){e.selectedNumGlyphs=t},expression:"selectedNumGlyphs"}})},O=[],E=a("b012"),N=a("1fb0"),C=a.n(N),F={name:"ViewManager",components:{"number-input-spinner":C.a},data:function(){return{selectedNumGlyphs:0}},computed:Object(y["a"])({},Object(f["c"])({maxDisplayedGlyphs:function(e){return e.app.maxDisplayedGlyphs},numDisplayedGlyphs:function(e){return e.app.numDisplayedGlyphs}})),methods:Object(y["a"])({},Object(f["b"])({changeDisplayedGlyphNum:"app/changeDisplayedGlyphNum"})),watch:{selectedNumGlyphs:E["debounce"].call(void 0,function(){this.selectedNumGlyphs!==this.numDisplayedGlyphs&&this.changeDisplayedGlyphNum(this.selectedNumGlyphs)},1e3),numDisplayedGlyphs:function(){if(this.numDisplayedGlyphs>this.selectedNumGlyphs)for(var e=0;e<this.numDisplayedGlyphs-this.selectedNumGlyphs;e++)this.$refs.spinner.increaseNumber();else for(var t=0;t<this.selectedNumGlyphs-this.numDisplayedGlyphs;t++)this.$refs.spinner.decreaseNumber()}}},_=F,B=(a("1f78"),Object(c["a"])(_,P,O,!1,null,null,null)),T=B.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-btn",{attrs:{icon:"",id:"zoom-in"},on:{click:e.zoomIn}},[a("v-icon",{attrs:{color:"primary"}},[e._v("\n            zoom_in\n        ")])],1),a("v-btn",{attrs:{icon:"",id:"zoom-out"},on:{click:e.zoomOut}},[a("v-icon",{attrs:{color:"primary"}},[e._v("\n            zoom_out\n        ")])],1)],1)},z=[],R={name:"Zoomer",data:function(){return{step:.1}},computed:Object(y["a"])({},Object(f["c"])({boundingRectSizeFactor:function(e){return e.app.boundingRectSizeFactor}})),methods:Object(y["a"])({},Object(f["b"])({setBoundingRectSizeFactor:"app/setBoundingRectSizeFactor",updateGrid:"app/updateGrid"}),{zoomIn:function(){var e=this.boundingRectSizeFactor+this.step;e<=1&&(this.setBoundingRectSizeFactor(e),this.updateGrid())},zoomOut:function(){var e=this.boundingRectSizeFactor-this.step;e>=0&&(this.setBoundingRectSizeFactor(e),this.updateGrid())}})},L=R,W=(a("ffcb"),Object(c["a"])(L,I,z,!1,null,"ae5120c6",null)),$=W.exports,M={name:"Toolbar",components:{"app-load-data":j,"app-view-manager":T,"app-zoomer":$},computed:Object(y["a"])({},Object(f["c"])({fileName:function(e){return e.backend.fileName},numDisplayedGlyphs:function(e){return e.glyph.numDisplayedGlyphs}})),methods:Object(y["a"])({},Object(f["b"])({toggleToolsDrawer:"app/toggleToolsDrawer",toggleStudioDrawer:"app/toggleStudioDrawer",loadFeaturesFile:"backend/loadFeaturesFile",hideGlyphs:"glyph/hideGlyphs"}),{onToolsClick:function(){this.toggleToolsDrawer()},onStudioClick:function(){this.toggleStudioDrawer()}})},A=M,U=(a("9f85"),Object(c["a"])(A,g,v,!1,null,"9eb61e70",null)),V=U.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{staticClass:"dark",attrs:{id:"tools-drawer",fixed:"",clipped:"",value:this.toolsDrawer,"mini-variant":"","mini-variant-width":"60",app:"","mobile-break-point":"800"},on:{input:e.updateToolsDrawerState}},[a("v-list",[a("app-bind"),a("app-add-child"),a("app-remove")],1)],1)},q=[],J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"glyph",flat:"",block:""},on:{click:function(t){return e.setGlyphBinderState(!0)}},slot:"activator"},[a("v-icon",{attrs:{light:"",color:e.color}},[e._v("view_column")])],1),a("span",[e._v(" Open pane for feature binding")])],1)],1)},Y=[],K={name:"Bind",methods:Object(y["a"])({},Object(f["b"])({setGlyphBinderState:"app/setGlyphBinderState"})),props:{color:{type:String,default:"white"}}},X=K,Z=(a("c892"),Object(c["a"])(X,J,Y,!1,null,"139ae654",null)),Q=Z.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"glyph",flat:"",block:""},on:{click:function(t){return e.setGlyphBinderState(!0)}},slot:"activator"},[a("v-icon",{attrs:{light:"",color:e.color}},[e._v("add")])],1),a("span",[e._v(" Add glyph to existing drawing ")])],1)],1)},te=[],ae={name:"addChild",methods:Object(y["a"])({},Object(f["b"])({addChildGlyph:"glyph/addChildGlyph"})),props:{color:{type:String,default:"white"}}},ne=ae,ie=(a("4329"),Object(c["a"])(ne,ee,te,!1,null,"4d10e6a6",null)),re=ie.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"remove",flat:"",block:""},on:{click:e.onClick},slot:"activator"},[a("v-icon",{attrs:{light:"",color:"white"}},[e._v("close")])],1),a("span",[e._v(" Remove glyphs ")])],1)],1)},oe=[],le={name:"Remove",computed:Object(y["a"])({},Object(f["c"])({parsedData:function(e){return e.backend.parsedData},glyphs:function(e){return e.glyph.project.glyphs}})),methods:Object(y["a"])({},Object(f["b"])({resetLayers:"glyph/resetLayers",changeDisplayedGlyphNum:"app/changeDisplayedGlyphNum"}),{onClick:function(){this.resetLayers(),this.changeDisplayedGlyphNum(0)}})},ce=le,pe=(a("d299"),Object(c["a"])(ce,se,oe,!1,null,"65f5fb38",null)),de=pe.exports,he={name:"Tools",components:{"app-bind":Q,"app-add-child":re,"app-remove":de},computed:Object(y["a"])({},Object(f["c"])({toolsDrawer:function(e){return e.app.toolsDrawer}})),methods:Object(y["a"])({},Object(f["b"])({setToolsDrawerState:"app/setToolsDrawerState"}),{updateToolsDrawerState:function(e){e||this.setToolsDrawerState(e)}})},ue=he,me=Object(c["a"])(ue,H,q,!1,null,"8867d2e4",null),ye=me.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"view"}},[e.welcomeCard?a("app-welcome-card",{attrs:{id:"welcome-card"},on:{configLoaded:e.applyBinding}}):e._e(),a("app-bind-options",{directives:[{name:"show",rawName:"v-show",value:e.glyphBinder,expression:"glyphBinder"}],ref:"bonds",attrs:{id:"element-binder"}}),a("v-container",{directives:[{name:"show",rawName:"v-show",value:!e.glyphBinder,expression:"!glyphBinder"}],attrs:{id:"card-container",fluid:"","grid-list-md":""}}),a("app-glyph-canvas",{directives:[{name:"resize",rawName:"v-resize.quiet",value:e.updateGrid,expression:"updateGrid",modifiers:{quiet:!0}},{name:"show",rawName:"v-show",value:e.canvas,expression:"canvas"}],ref:"canvas"})],1)},ge=[],ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("canvas",{directives:[{name:"resize",rawName:"v-resize",value:e.resizeCanvasToView,expression:"resizeCanvasToView"}],attrs:{id:"glyph-canvas"}})},be=[],we=(a("ac6a"),a("2222")),xe=a.n(we),ke={name:"GlyphCanvas",computed:Object(y["a"])({},Object(f["c"])({boundingRects:function(e){return e.app.boundingRects},numDisplayedGlyphs:function(e){return e.app.numDisplayedGlyphs},normalizedData:function(e){return e.backend.normalizedData},glyphs:function(e){return e.glyph.project.glyphs},currentPage:function(e){return e.app.currentPage},redrawing:function(e){return e.glyph.redrawing}})),methods:Object(y["a"])({},Object(f["b"])({setLayersUp:"glyph/setLayersUp",updateGrid:"app/updateGrid",drawGlyph:"glyph/drawGlyph",moveGlyph:"glyph/moveGlyph",resetGlyph:"glyph/resetGlyph",addCaption:"glyph/addCaption"}),{resizeCanvasToView:function(){var e=document.getElementById("view");null!==xe.a.view&&(xe.a.view.viewSize.width=e.offsetWidth,xe.a.view.viewSize.height=e.offsetHeight,console.log("Canvas resized"))},placeGlyphs:E["debounce"].call(void 0,function(){var e=this,t=0,a=0;this.glyphs.slice(0,this.numDisplayedGlyphs).every(function(e){return e.drawn})?(this.boundingRects.forEach(function(t,n){var i=(e.currentPage-1)*e.numDisplayedGlyphs+n;i<e.glyphs.length&&(e.moveGlyph({glyphIndex:i,boundingRect:t}),a++)}),a>0&&console.log("".concat(a," glyphs were moved"))):(this.boundingRects.forEach(function(a,n){var i=(e.currentPage-1)*e.numDisplayedGlyphs+n;i<e.glyphs.length&&a.width>0&&a.height>0&&!e.glyphs[i].drawn&&(e.drawGlyph({glyphIndex:i,boundingRect:a}),t++)}),t>0&&console.log("".concat(t," glyphs were drawn")))},450),redrawGlyphs:function(){var e=this,t=[];this.boundingRects.forEach(function(e){var a=e.generator;return t.push(a.id)});var a=function(e){return e.every(function(t){return t===e[0]})};if(!a(t))throw Error("Glyph come from mismatching generators");this.glyphs.forEach(function(t,a){return e.resetGlyph(a)});var n=0;this.boundingRects.forEach(function(t,a){var i=(e.currentPage-1)*e.numDisplayedGlyphs+a;i<e.glyphs.length&&t.width>0&&t.height>0&&(e.drawGlyph({glyphIndex:i,boundingRect:t}),e.addCaption({glyphIndex:i,boundingRect:t}),n++)}),n>0&&console.log("".concat(n," glyphs were redrawn"))}}),watch:{numDisplayedGlyphs:function(){this.updateGrid(),this.redrawGlyphs()},boundingRects:{handler:function(){this.glyphs.length>=this.boundingRects.length&&this.placeGlyphs()},deep:!0},currentPage:function(){this.redrawGlyphs()},redrawing:function(){this.redrawing&&this.redrawGlyphs()}},mounted:function(){xe.a.setup("glyph-canvas"),xe.a.activate(),this.setLayersUp(),this.resizeCanvasToView()}},Ge=ke,Se=(a("852a"),Object(c["a"])(Ge,ve,be,!1,null,"36066544",null)),De=Se.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"light elevation-5",staticStyle:{overflow:"auto"}},[a("v-container",{attrs:{fluid:"",id:"lists-container"}},[a("v-layout",{attrs:{column:""}},[a("v-layout",{staticStyle:{position:"relative",top:"-60px"},attrs:{row:""}},[a("v-flex",{attrs:{xs4:"",sm3:"","d-flex":""}},[a("v-select",{attrs:{items:e.glyphNames,box:"",label:"Choose glyph type"},model:{value:e.selectedGlyphName,callback:function(t){e.selectedGlyphName=t},expression:"selectedGlyphName"}})],1),a("v-flex",{staticStyle:{position:"relative",left:"10px"},attrs:{xs4:"",sm3:"","d-flex":""}},[a("v-select",{attrs:{items:e.settingOptions,box:"",label:e.glyphSettings.message||"Choose glyph-specific options"},model:{value:e.selectedGlyphSetting,callback:function(t){e.selectedGlyphSetting=t},expression:"selectedGlyphSetting"}})],1),a("v-flex",{staticStyle:{position:"relative",left:"20px"},attrs:{xs4:"",sm3:"","d-flex":""}},[a("v-select",{attrs:{items:e.stringFields,box:"",label:"Choose cluster names"},model:{value:e.selectedOrderField,callback:function(t){e.selectedOrderField=t},expression:"selectedOrderField"}})],1),a("v-flex",{staticStyle:{position:"relative",left:"20px"},attrs:{xs4:"",sm3:"","d-flex":""}},[a("v-card-text",{staticClass:"title"},[e._v("\n            Select element - feature pairs\n          ")])],1),a("v-flex",{attrs:{xs4:"",sm3:"","d-flex":""}},[a("v-spacer")],1),a("v-spacer"),a("v-btn",{attrs:{round:"",flat:""},on:{click:function(t){return e.setGlyphBinderState(!1)}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("close")])],1)],1),a("v-layout",{staticStyle:{position:"relative",top:"-75px"},attrs:{row:""}},[e.glyphShapes.children.length>0?a("app-scroll-options",{attrs:{title:"Shape selection",items:e.shapeItems,select:e.selectedShape},on:{"update:select":function(t){e.selectedShape=t}}}):e._e(),a("app-scroll-options",{attrs:{title:"Element selection",items:e.elementItems,select:e.selectedGlyphEl},on:{"update:select":function(t){e.selectedGlyphEl=t}}}),a("app-scroll-options",{attrs:{title:"Feature selection",items:e.fieldItems,select:e.selectedField},on:{"update:select":function(t){e.selectedField=t}}}),a("app-scroll-options",{attrs:{title:"Binding selection",items:e.bindingItems}})],1),a("v-layout",{staticStyle:{position:"relative",top:"-30px"},attrs:{row:"","align-start":"","justify-start":""}},[a("app-load-config",{staticStyle:{position:"relative",top:"-5px",right:"-10px"},on:{configLoaded:e.applyConfig}}),a("v-btn",{staticClass:"primary white--text",attrs:{flat:""},on:{click:e.bindFieldToElement}},[e._v("Bind")]),a("v-btn",{staticClass:"secondary black--text",attrs:{flat:""},on:{click:e.unbindFieldsToElements}},[e._v("Unbind")]),a("v-btn",{staticClass:"dark white--text",attrs:{flat:""},nativeOn:{click:function(t){return e.applyBinding(t)}}},[e._v("OK")]),a("div",[a("v-chip",{attrs:{light:""}},[e._v(e._s(this.selectedGlyphEl))]),a("v-icon",{attrs:{color:"deep-purple"}},[e._v(" arrow_forward ")]),a("v-chip",{attrs:{light:""}},[e._v(e._s(this.selectedField))])],1)],1)],1)],1)],1)},Pe=[],Oe=(a("28a5"),a("c5f6"),a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("upload-btn",{attrs:{uniqueId:"",title:"UploadConfig",large:"",color:"light",icon:""},on:{"file-update":e.loadConfig}},[a("template",{slot:"icon"},[a("v-icon",{attrs:{color:"deep-purple"}},[e._v("attach_file")])],1)],2)}),Ee=[],Ne=(a("96cf"),a("3b8d")),Ce={name:"LoadConfig",components:{"upload-btn":k.a},methods:Object(y["a"])({},Object(f["b"])({readBindingsFile:"backend/readBindingsFile"}),{loadConfig:function(){var e=Object(Ne["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.readBindingsFile(t);case 2:this.$emit("configLoaded");case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()})},Fe=Ce,_e=Object(c["a"])(Fe,Oe,Ee,!1,null,null,null),Be=_e.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",{staticClass:"lists-outer",attrs:{xs12:"",sm6:""}},[a("span",{staticClass:"body-2"},[e._v(" "+e._s(e.title)+" ")]),a("v-list",{staticClass:"lists",attrs:{avatar:""}},[a("recycle-scroller",{staticClass:"scroller",attrs:{items:e.items,"item-size":35,"key-field":"id"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[a("v-list-tile",{staticClass:"tile",class:{secondary:n.selected},on:{click:function(t){return e.selectItem(n)}}},[a("v-list-tile-content",{staticClass:"tile-content"},[e._v(e._s(n.value))])],1)]}}])})],1)],1)},Ie=[],ze=a("7828"),Re={name:"ScrollOptions",components:{"recycle-scroller":ze["a"]},props:{title:String,items:Array,selected:Object},methods:Object(y["a"])({},Object(f["b"])({selectGlyphEl:"glyph/selectGlyphEl"}),{selectItem:function(e){this.selectedItem=e,this.items.forEach(function(e){e.selected=!1}),e.selected=!0,this.$emit("update:select",e.value)}})},Le=Re,We=(a("b63d"),Object(c["a"])(Le,Te,Ie,!1,null,"66856029",null)),$e=We.exports,Me={name:"BindOptions",components:{"app-scroll-options":$e,"app-load-config":Be},data:function(){return{selectedShape:"",selectedGlyphEl:"",selectedField:"",fieldBindings:[],selectedGlyphName:"",selectedOrderField:"",selectedGlyphSetting:""}},computed:Object(y["a"])({},Object(f["c"])({glyphTypes:function(e){return e.glyph.glyphTypes},glyphSettings:function(e){return e.glyph.glyphSettings},glyphShapes:function(e){return e.glyph.glyphShapes},glyphElements:function(e){return e.glyph.glyphElements},dataFields:function(e){return e.backend.dataFields},fieldTypes:function(e){return e.backend.fieldTypes},fileName:function(e){return e.backend.fileName},loadedBindingData:function(e){return e.backend.loadedBindingData},numDisplayedGlyphs:function(e){return e.app.numDisplayedGlyphs},maxDisplayedGlyphs:function(e){return e.app.maxDisplayedGlyphs},parsedData:function(e){return e.backend.parsedData}}),{glyphNames:function(){var e=[];return this.glyphTypes.forEach(function(t){return e.push(t.type)}),e},settingOptions:function(){return this.glyphSettings.options},shapeItems:function(){var e=[],t=this.glyphShapes.children.concat([this.glyphShapes.main]);return t.forEach(function(t,a){e.push({id:a,value:t,selected:!1})}),e},elementItems:function(){var e=this,t=[];return this.glyphElements.forEach(function(a,n){a.target===e.selectedShape&&t.push({id:n,value:a.name,selected:!1})}),t},fieldItems:function(){var e=this,t=[];return this.dataFields.forEach(function(a,n){e.fieldTypes[a]===Number&&t.push({id:n,value:a,selected:!1})}),t},bindingItems:function(){var e=this,t=[];return this.fieldBindings.forEach(function(a,n){var i=a.shape,r=a.element,s=a.field;t.push({id:n,value:1===e.glyphShapes.length?"".concat(r," - ").concat(s):"".concat(i,".").concat(r," = ").concat(s),selected:!1})}),t},stringFields:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var i,r=this.dataFields[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;this.fieldTypes[s]===String&&e.push(s)}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}return 0===e.length&&(e=this.dataFields),e}}),methods:Object(y["a"])({},Object(f["b"])({setGlyphBinderState:"app/setGlyphBinderState",setGlyphType:"glyph/setGlyphType",setBindings:"glyph/setBindings",addGlyphs:"glyph/addGlyphs",changeDisplayedGlyphNum:"app/changeDisplayedGlyphNum",setNamingField:"backend/setNamingField"}),{bindFieldToElement:function(){var e=this;console.log("Binding ".concat(this.selectedGlyphEl," to ").concat(this.selectedField));var t=-1;this.fieldBindings.forEach(function(a,n){a.shape===e.selectedShape&&a.element===e.selectedGlyphEl&&(t=n)}),delete this.fieldBindings[t],this.fieldBindings.push({shape:this.selectedShape,element:this.selectedGlyphEl,field:this.selectedField})},unbindFieldsToElements:function(){var e=this;this.bindingItems.forEach(function(t){for(var a=0;a<e.fieldBindings.length;a++){var n=void 0,i=void 0,r=void 0;1===t.value.split(".").length?(n=e.selectedShape,i=t.value.split("=")[0].slice(0,-1),r=t.value.split("=")[1].slice(1)):(n=t.value.split(".")[0],i=t.value.split(".")[1].split("=")[0].slice(0,-1),r=t.value.split(".")[1].split("=")[1].slice(1));var s=e.fieldBindings[a];t.selected&&s.shape===n&&s.element===i&&s.field===r&&(e.fieldBindings.splice(a,1),console.log("Unbinding ".concat(s.element," and ").concat(s.field)))}})},applyBinding:function(){this.setNamingField(this.selectedOrderField),this.setBindings(this.fieldBindings),this.addGlyphs(),this.setGlyphBinderState(!1),this.changeDisplayedGlyphNum(this.numDisplayedGlyphs||this.maxDisplayedGlyphs)},selectField:function(e){this.selectedField=e.value,this.fieldItems.forEach(function(e){e.selected=!1}),e.selected=!0},selectGlyphEl:function(e){this.selectedGlyphEl=e.value,this.elementItems.forEach(function(e){e.selected=!1}),e.selected=!0},applyConfig:function(){this.fileName===this.loadedBindingData.fileName&&this.loadedBindingData.bindings.length>0?(this.selectedOrderField=this.loadedBindingData.displayOrderField,this.selectedGlyphName=this.loadedBindingData.glyphType,this.selectedGlyphSetting=this.loadedBindingData.glyphSetting,this.setGlyphType({glyphTypeName:this.selectedGlyphName,glyphSetting:this.selectedGlyphSetting}),this.fieldBindings=this.loadedBindingData.bindings,console.log("Using loaded glyph configuration")):console.log("Invalid config file - cannot load")}}),watch:{glyphShapes:function(){0===this.glyphShapes.children.length||""===this.selectedShape?this.selectedShape=this.glyphShapes.main:this.selectedShape=""},selectedGlyphName:function(){"None"!==this.selectedGlyphName&&this.setGlyphType({glyphTypeName:this.selectedGlyphName,glyphSetting:this.selectedGlyphSetting})},selectedGlyphSetting:function(){"None"!==this.selectedGlyphName&&this.setGlyphType({glyphTypeName:this.selectedGlyphName,glyphSetting:this.selectedGlyphSetting})}}},Ae=Me,Ue=(a("f4f4"),Object(c["a"])(Ae,je,Pe,!1,null,"3a6186a8",null)),Ve=Ue.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"light elevation-5"},[e.fileName?a("v-layout",[a("v-card-text",{staticClass:"deep-purple--text font-weight-black"},[e._v("\n      Now add some glyphs !\n    ")]),a("app-bind",{attrs:{color:"grey"}})],1):a("v-layout",{attrs:{id:"welcome-message"}},[a("v-card-text",{staticClass:"deep-purple--text font-weight-black"},[e._v("\n      Please upload a data file")]),a("app-load-data",{attrs:{"unique-id":"welcomeUpload"}})],1),e.fileName?a("v-layout",[a("v-card-text",{staticClass:"deep-purple--text font-weight-black"},[e._v("\n      Or load a previous configuration file\n    ")]),a("app-load-config",{on:{configLoaded:e.notifyLoad}})],1):e._e()],1)},qe=[],Je={name:"WelcomeCard",components:{"app-load-data":j,"app-bind":Q,"app-load-config":Be},computed:Object(y["a"])({},Object(f["c"])({welcomeCard:function(e){return e.app.welcomeCard},glyphBinder:function(e){return e.app.glyphBinder},numDisplayedGlyphs:function(e){return e.app.numDisplayedGlyphs},fileName:function(e){return e.backend.fileName}})),methods:Object(y["a"])({},Object(f["b"])({setWelcomeCardState:"app/setWelcomeCardState"}),{notifyLoad:function(){this.$emit("configLoaded"),this.setWelcomeCardState(!1)}}),watch:{numDisplayedGlyphs:function(){0===this.numDisplayedGlyphs?this.setWelcomeCardState(!0):this.welcomeCard&&this.setWelcomeCardState(!1)},glyphBinder:function(){this.glyphBinder&&this.setWelcomeCardState(!1)}}},Ye=Je,Ke=Object(c["a"])(Ye,He,qe,!1,null,"6cdf4244",null),Xe=Ke.exports,Ze={name:"UIView",data:function(){return{boundingRects:[],page:1}},components:{"app-glyph-canvas":De,"app-bind-options":Ve,"app-welcome-card":Xe},computed:Object(y["a"])({},Object(f["c"])({welcomeCard:function(e){return e.app.welcomeCard},glyphBinder:function(e){return e.app.glyphBinder},canvas:function(e){return e.app.canvas}})),methods:Object(y["a"])({},Object(f["b"])({changeDisplayedGlyphNum:"app/changeDisplayedGlyphNum",updateGrid:"app/updateGrid"}),{applyBinding:function(){this.$refs.bonds.applyConfig(),this.$refs.bonds.applyBinding()}}),mounted:function(){this.updateGrid()}},Qe=Ze,et=(a("3c5b"),Object(c["a"])(Qe,fe,ge,!1,null,"0d68fd69",null)),tt=et.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{id:"studio-drawer",fixed:"",clipped:"",value:this.studioDrawer,app:"",right:"","mobile-break-point":"1000",dark:""},on:{input:e.updateStudioDrawerState}},[a("div",{staticClass:"pointers-please studioPanel elevation-1"},[a("app-viz-props")],1)])},nt=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[e.glyphShapes.children.length>0?a("v-toolbar",{attrs:{color:"dark",flat:"",dense:""}},[a("div",{staticClass:"select-title"},[a("v-select",{attrs:{items:[e.glyphShapes.main].concat(e.glyphShapes.children),dense:"",label:"Glyph Shape",disabled:e.changeFeatureIsPressed},model:{value:e.selectedShapeName,callback:function(t){e.selectedShapeName=t},expression:"selectedShapeName"}})],1)]):e._e(),a("v-toolbar",{attrs:{id:"toolbar",color:"dark",flat:"",dense:""}},[a("div",{staticClass:"select-title"},[a("v-select",{attrs:{items:e.elementNames,dense:"",label:"Glyph Element",disabled:e.changeFeatureIsPressed},model:{value:e.selectedElementName,callback:function(t){e.selectedElementName=t},expression:"selectedElementName"}})],1),a("div",{staticClass:"select-title"},[a("v-select",{attrs:{items:e.fieldNames,dense:"",label:"Bound Feature"},model:{value:e.selectedFieldName,callback:function(t){e.selectedFieldName=t},expression:"selectedFieldName"}})],1)]),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[e.changeFeatureIsPressed?a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedElementName,expression:"selectedElementName"}],attrs:{depressed:"",small:"",color:"secondary"},on:{click:e.applyFeatureChange}},[a("span",{staticClass:"text--primary"},[e._v("Apply")])]):a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.selectedElementName,expression:"selectedElementName"}],attrs:{depressed:"",small:"",color:"secondary"},on:{click:function(t){e.changeFeatureIsPressed=!0}}},[a("span",{staticClass:"text--primary"},[e._v("change feature")])]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.changeFeatureIsPressed,expression:"changeFeatureIsPressed"}],attrs:{depressed:"",small:"",color:"primary"},on:{click:e.cancelFieldSelection}},[a("span",{staticClass:"text--white"},[e._v("Cancel")])])],1),a("v-list-tile",[a("v-slider",{directives:[{name:"show",rawName:"v-show",value:e.hasProperties.size,expression:"hasProperties.size"}],attrs:{color:"secondary",label:"Stroke Size:",min:e.hasProperties.size?e.selectedElement.properties.size.range[0]:0,max:e.hasProperties.size?e.selectedElement.properties.size.range[1]:100,step:e.hasProperties.size?e.selectedElement.properties.size.step:1,disabled:e.changeFeatureIsPressed},model:{value:e.selectedWidth,callback:function(t){e.selectedWidth=t},expression:"selectedWidth"}})],1),a("v-list-tile",[a("span",{directives:[{name:"show",rawName:"v-show",value:e.hasProperties.color,expression:"hasProperties.color"}],staticStyle:{color:"#BDBDBD"}},[e._v("Element color:")]),a("v-spacer"),a("v-dialog",{attrs:{width:"225px",disabled:e.changeFeatureIsPressed},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("a",{directives:[{name:"show",rawName:"v-show",value:e.hasProperties.color,expression:"hasProperties.color"}],attrs:{slot:"activator"},slot:"activator"},[a("div",{staticClass:"color-tile",staticStyle:{position:"relative",right:"135px"},style:{"background-color":e.colorPick.hex}})]),a("v-card",[a("color-picker",{attrs:{id:"picker",disabled:e.changeFeatureIsPressed},model:{value:e.colorPick,callback:function(t){e.colorPick=t},expression:"colorPick"}})],1)],1)],1),a("v-list-tile")],1)],1)],1)},rt=[],st=a("c345"),ot={name:"VizProps",components:{"color-picker":st["Chrome"]},data:function(){return{changeFeatureIsPressed:!1,selectedShapeName:"",selectedElementName:"",selectedElement:{name:"",properties:{}},selectedFieldName:"",currentGlyphId:0,selectedWidth:1,selectedRelativeX:.5,selectedRelativeY:.5,colorPick:{hex:""},dialog:!1}},computed:Object(y["a"])({},Object(f["c"])({selection:function(e){return e.glyph.selection},bindings:function(e){return e.glyph.project.bindings},glyphTypeName:function(e){return e.glyph.glyphTypeName},glyphShapes:function(e){return e.glyph.glyphShapes},glyphElements:function(e){return e.glyph.glyphElements},dataFields:function(e){return e.backend.dataFields},fieldTypes:function(e){return e.backend.fieldTypes},numDisplayedGlyphs:function(e){return e.app.numDisplayedGlyphs}}),{elementNames:function(){var e=this,t=[];return this.bindings.forEach(function(a){a.shape===e.selectedShapeName&&t.push(a.element)}),t},boundField:function(){if(this.selectedElementName){var e=!0,t=!1,a=void 0;try{for(var n,i=this.bindings[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var r=n.value;if(r.shape===this.selectedShapeName&&r.element===this.selectedElementName)return r.field}}catch(s){t=!0,a=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw a}}throw Error("No binding named ".concat(this.selectedElement.name))}return""},fieldNames:function(){var e=this,t=[];return this.changeFeatureIsPressed?this.dataFields.forEach(function(a){e.fieldTypes[a]===Number&&t.push(a)}):this.bindings.forEach(function(e){t.push(e.field)}),t},hasProperties:function(){return{size:!!this.selectedElement.properties.size,color:!!this.selectedElement.properties.color}}}),methods:Object(y["a"])({},Object(f["b"])({selectGlyphEl:"glyph/selectGlyphEl",setPathParameter:"glyph/setPathParameter",setBindings:"glyph/setBindings",resetLayers:"glyph/resetLayers",changeDisplayedGlyphNum:"app/changeDisplayedGlyphNum",addGlyphs:"glyph/addGlyphs"}),{applyFeatureChange:function(){var e=this,t=[],a="";this.bindings.forEach(function(n){if(n.shape===e.selectedShapeName&&n.element===e.selectedElementName){a=n.field;var i=Object.assign({},n);i.field=e.selectedFieldName,t.push(i)}else t.push(n)}),this.reset({selectedElementName:this.selectedElementName,selectedElement:this.selectedElement,selectedField:this.selectedFieldName}),this.setBindings(t),this.addGlyphs();var n=this.numDisplayedGlyphs;this.changeDisplayedGlyphNum(0),setTimeout(function(e){console.log("num"+e),this.changeDisplayedGlyphNum(e),this.changeFeatureIsPressed=!1,console.log("".concat(this.selectedShapeName,".").concat(this.selectedElementName," was bound to ").concat(this.selectedFieldName," (previously bound to ").concat(a,")"))}.bind(this),100,n)},cancelFieldSelection:function(){this.changeFeatureIsPressed=!1},reset:function(e){this.changeFeatureIsPressed=e.changeFeatureIsPressed||!1,this.selectedElementName=e.selectedElementName||"",this.selectedElement=e.selectedElement||{name:"",properties:{}},this.selectedFieldName=e.selectedFieldName||"",this.currentGlyphId=e.currentGlyphId||0,this.selectedWidth=e.selectedWidth||1,this.colorPick=e.colorPick||{hex:""},this.dialog=e.dialog||!1},moveShape:function(){console.log("to implement")}}),watch:{glyphShapes:function(){0===this.glyphShapes.children.length&&(this.selectedShapeName=this.glyphShapes.main)},selectedElementName:function(){var e;this.selectGlyphEl({layer:this.selection.layer,path:this.selectedElementName});var t=!0,a=!1,n=void 0;try{for(var i,r=this.glyphElements[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.name===this.selectedElementName&&s.target===this.selectedShapeName){e=s;break}}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}this.selectedElement=e},selectedFieldName:function(){if(!this.changeFeatureIsPressed&&this.selectedFieldName){var e,t="",a=!0,n=!1,i=void 0;try{for(var r,s=this.bindings[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var o=r.value;if(o.field===this.selectedFieldName){t=o.element;break}}}catch(m){n=!0,i=m}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}if(!t)throw Error("No element for selected field '".concat(this.selectedFieldName,"'"));this.selectGlyphEl({layer:this.selection.layer,path:t});var l=!0,c=!1,p=void 0;try{for(var d,h=this.glyphElements[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var u=d.value;if(u.name===t){e=u;break}}}catch(m){c=!0,p=m}finally{try{l||null==h.return||h.return()}finally{if(c)throw p}}this.selectedElement=e,this.selectedElementName=t}},boundField:function(){this.selectedFieldName=this.boundField},selectedWidth:function(){this.numDisplayedGlyphs&&this.setPathParameter({parameter:"strokeWidth",value:this.selectedWidth,shapeName:this.selectedShapeName,elementName:this.selectedElement.name})},colorPick:function(){this.numDisplayedGlyphs&&this.setPathParameter({parameter:"strokeColor",value:this.colorPick.hex,shapeName:this.selectedShapeName,elementName:this.selectedElement.name})}}},lt=ot,ct=(a("cf26"),Object(c["a"])(lt,it,rt,!1,null,"def22bb2",null)),pt=ct.exports,dt={name:"Studio",components:{"app-viz-props":pt},computed:Object(y["a"])({},Object(f["c"])({studioDrawer:function(e){return e.app.studioDrawer}})),methods:Object(y["a"])({},Object(f["b"])({setStudioDrawerState:"app/setStudioDrawerState"}),{updateStudioDrawerState:function(e){e||this.setStudioDrawerState(e)}})},ht=dt,ut=(a("580d"),Object(c["a"])(ht,at,nt,!1,null,"20a7b7d8",null)),mt=ut.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{staticClass:"deep-purple--text",attrs:{light:"",app:""}},[a("app-sheet"),a("v-container",{directives:[{name:"show",rawName:"v-show",value:e.numDisplayedGlyphs,expression:"numDisplayedGlyphs"}],attrs:{id:"pagination-container"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs8:""}},[a("v-pagination",{attrs:{id:"pagination",length:e.numPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.numDisplayedGlyphs,expression:"numDisplayedGlyphs"}],attrs:{id:"order-text"}},[e._v("Order:")]),a("div",{attrs:{id:"order-select"}},[a("v-select",{directives:[{name:"show",rawName:"v-show",value:e.numDisplayedGlyphs,expression:"numDisplayedGlyphs"}],attrs:{items:["file entry order"].concat(e.dataFields),dense:""},model:{value:e.selectedOrderField,callback:function(t){e.selectedOrderField=t},expression:"selectedOrderField"}})],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.numDisplayedGlyphs,expression:"numDisplayedGlyphs"}],attrs:{flat:"",icon:""},on:{click:e.reorderGlyphs}},[a("v-icon",{attrs:{color:"primary"}},[e._v("reorder")])],1)],1)},ft=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-bottom-sheet",{scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-btn",{attrs:{color:"primary",dark:"",small:""}},[e._v("\n      View Data\n    ")])]},proxy:!0}]),model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[a("app-table")],1)},vt=[],bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{id:"table",headers:e.headers,items:e.parsedData,"no-results-text":"Load a feature file to display features"},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.features,function(n){return a("td",{key:n,staticClass:"text-xs-right"},[e._v("\n      "+e._s(t.item[n].slice(0,Math.min(5,t.item[n].length)))+"\n    ")])})}}])})},wt=[],xt=(a("456d"),{name:"Table",data:function(){return{maxColumns:4}},computed:Object(y["a"])({},Object(f["c"])({parsedData:function(e){return e.backend.parsedData},glyphs:function(e){return e.glyph.project.glyphs},numDisplayedGlyphs:function(e){return e.glyph.numDisplayedGlyphs}}),{features:function(){return this.parsedData.length>0?Object.keys(this.parsedData[0]):[]},headers:function(){var e=[];return this.features.forEach(function(t){e.push({text:t,value:t})}),e}})}),kt=xt,Gt=(a("1f0e"),Object(c["a"])(kt,bt,wt,!1,null,"cb500356",null)),St=Gt.exports,Dt={name:"Sheet",components:{"app-table":St},data:function(){return{sheet:!1}}},jt=Dt,Pt=Object(c["a"])(jt,gt,vt,!1,null,"4b860324",null),Ot=Pt.exports,Et={name:"LowerToolbar",components:{"app-sheet":Ot},data:function(){return{page:1,selectedOrderField:"file entry order"}},computed:Object(y["a"])({},Object(f["c"])({numDisplayedGlyphs:function(e){return e.app.numDisplayedGlyphs},glyphs:function(e){return e.glyph.project.glyphs},numPages:function(e){return e.app.numPages},dataFields:function(e){return e.backend.dataFields},fieldTypes:function(e){return e.backend.fieldTypes}})),methods:Object(y["a"])({},Object(f["b"])({reassignLayers:"glyph/reassignLayers",changeCurrentPage:"app/changeCurrentPage",orderDataByValue:"backend/orderDataByValue"}),{reorderGlyphs:function(){this.orderDataByValue(this.selectedOrderField)}}),watch:{page:function(){this.reassignLayers({startIndex:(this.page-1)*this.numDisplayedGlyphs,endIndex:this.page*this.numDisplayedGlyphs}),this.changeCurrentPage(this.page)}}},Nt=Et,Ct=(a("00aa"),Object(c["a"])(Nt,yt,ft,!1,null,"21393ca7",null)),Ft=Ct.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{value:e.active,color:e.color,timeout:0,top:""}},[e._v("\n  "+e._s(e.text)+"\n")])},Bt=[],Tt={computed:Object(y["a"])({},Object(f["c"])({active:function(e){return e.app.snackbar.active},text:function(e){return e.app.snackbar.text},color:function(e){return e.app.snackbar.color},timeout:function(e){return e.app.snackbar.timeout}})),methods:Object(y["a"])({},Object(f["b"])({dismissSnackbar:"app/dismissSnackbar"})),watch:{active:function(e){var t=this;e&&this.timeout>0&&setTimeout(function(){t.dismissSnackbar()},this.timeout)}}},It=Tt,zt=Object(c["a"])(It,_t,Bt,!1,null,null,null),Rt=zt.exports,Lt={name:"Editor",components:{"app-toolbar":V,"app-tools":ye,"app-view":tt,"app-studio":mt,"app-lower-toolbar":Ft,"app-snackbar":Rt},computed:Object(y["a"])({},Object(f["c"])({toolbar:function(e){return e.app.toolbar},footer:function(e){return e.app.footer},toolsDrawer:function(e){return e.app.toolsDrawer}}))},Wt=Lt,$t=(a("0195"),Object(c["a"])(Wt,u,m,!1,null,"e03d17b0",null)),Mt=$t.exports;n["default"].use(h["a"]);var At,Ut=new h["a"]({routes:[{path:"/",name:"Dashboard",component:Mt}]}),Vt={changeDisplayedGlyphMax:function(e,t){var a=20;t>a?(console.warn("Max number of displayed glyphs exceeded, setting to constant instead (".concat(t," > ").concat(a,")")),e.maxDisplayedGlyphs=a):(console.log("Max number of displayed glyphs changed to ".concat(t)),e.maxDisplayedGlyphs=t)},changeDisplayedGlyphNum:function(e,t){var a=t.numDisplayedGlyphs,n=t.glyphs;if(e.dockedView){if(a<=e.numDisplayedGlyphs){var i=!0,r=!1,s=void 0;try{for(var o,l=n.slice(a,n.length-1)[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;c.drawn&&c.reset()}}catch(p){r=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}}}else n.forEach(function(e){e.drawn&&e.reset()});e.numDisplayedGlyphs=Math.min(e.maxDisplayedGlyphs,a),e.numPages=Math.ceil(n.length/Math.max(e.numDisplayedGlyphs,1)),console.log("Number of displayed glyphs changed to ".concat(a," (on ").concat(e.numPages," pages)"))},changeCurrentPage:function(e,t){e.currentPage=t},setBoundingRects:function(e,t){e.boundingRects=t},activateSnackbar:function(e,t){var a=t.text,n=t.color,i=t.timeout;e.snackbar.active=!0,e.snackbar.text=a||"notification",e.snackbar.color=n||"info",e.snackbar.timeout=i||4e3},dismissSnackbar:function(e){e.snackbar.active=!1},toolbarOff:function(e){e.toolbar=!1},toolbarOn:function(e){e.toolbar=!0},toggleToolsDrawer:function(e){e.toolsDrawer=!e.toolsDrawer},toggleStudioDrawer:function(e){e.studioDrawer=!e.studioDrawer},setToolsDrawerState:function(e,t){e.toolsDrawer=t},setStudioDrawerState:function(e,t){e.studioDrawer=t},setGlyphBinderState:function(e,t){e.glyphBinder=t},setWelcomeCardState:function(e,t){e.welcomeCard=t},updateGrid:function(e){var t=[];if(e.numDisplayedGlyphs){var a=xe.a.view.bounds,n=Math.round(Math.sqrt(e.numDisplayedGlyphs*(a.width/a.height))),i=Math.round(e.numDisplayedGlyphs/n);n*i<e.numDisplayedGlyphs&&n++;for(var r=a.width/(n+1),s=a.height/(i+1),o=r*e.boundingRectSizeFactor,l=s*e.boundingRectSizeFactor,c=0,p="x-offset: ".concat(r.toFixed(2),"; y-offset: ").concat(s.toFixed(2),"; width: ").concat(o.toFixed(2),"; height: ").concat(l.toFixed(2)),d=0;d<i;d++)for(var h=0;h<n;h++)c<e.numDisplayedGlyphs&&(t.push({width:o,height:l,left:a.x+r*(h+.5),top:a.y+s*(d+.5),generator:{type:"grid",id:p}}),c++);console.log("Updating grid for (".concat(a.width,", ").concat(a.height,")-view --\x3e ")+p)}e.boundingRects=t},setBoundingRectSizeFactor:function(e,t){e.boundingRectSizeFactor=t}},Ht={changeDisplayedGlyphNum:function(e,t){var a=e.commit,n=e.rootState;return a("changeDisplayedGlyphNum",{numDisplayedGlyphs:t,glyphs:n.glyph.project.glyphs})},changeCurrentPage:function(e,t){var a=e.commit;return a("changeCurrentPage",t)},setBoundingRects:function(e,t){var a=e.commit;return a("setBoundingRects",t)},toolbarOff:function(e){var t=e.commit;return t("toolbarOff")},toolbarOn:function(e){var t=e.commit;return t("toolbarOn")},toggleToolsDrawer:function(e){var t=e.commit;return t("toggleToolsDrawer")},setToolsDrawerState:function(e,t){var a=e.commit;return a("setToolsDrawerState",t)},toggleStudioDrawer:function(e){var t=e.commit;return t("toggleStudioDrawer")},setStudioDrawerState:function(e,t){var a=e.commit;return a("setStudioDrawerState",t)},setGlyphBinderState:function(e,t){var a=e.commit;return a("setGlyphBinderState",t)},setWelcomeCardState:function(e,t){var a=e.commit;return a("setWelcomeCardState",t)},dismissSnackbar:function(e){var t=e.commit;return t("dismissSnackbar")},activateSnackbar:function(e,t){var a=e.commit;return a("activateSnackbar",t)},updateGrid:function(e,t){var a=e.commit;"undefined"===typeof At&&(At=Object(E["debounce"])(function(){a("updateGrid",t)},200)),At()},setBoundingRectSizeFactor:function(e,t){var a=e.commit;return a("setBoundingRectSizeFactor",t)}},qt=a("c9eb"),Jt=a.n(qt),Yt={toolbar:!0,toolsDrawer:!0,studioDrawer:!1,footer:!0,snackbar:{active:!1,text:"this is a notification",color:"info",timeout:4e3},glyphBinder:!1,canvas:!0,welcomeCard:!0,dockedView:!1,maxDisplayedGlyphs:20,numDisplayedGlyphs:0,boundingRectSizeFactor:1,boundingRects:[],numPages:0,currentPage:1},Kt={namespaced:!0,state:Yt,getters:Jt.a,actions:Ht,mutations:Vt},Xt=a("7618"),Zt=a("bc3a"),Qt=a.n(Zt),ea=function(e){var t=new FileReader;return new Promise(function(a,n){t.onerror=function(){t.abort(),n(new DOMException("Problem parsing input file."))},t.onload=function(){a(t.result)},t.readAsText(e)})},ta={readDataFile:function(){var e=Object(Ne["a"])(regeneratorRuntime.mark(function e(t,a){var n,i,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,i=t.dispatch,r=t.commit,console.log(a),a instanceof File){e.next=4;break}throw new TypeError("Input is of type ".concat("undefined"===typeof File?"undefined":Object(Xt["a"])(File)," (expected type: File)"));case 4:return e.prev=4,e.next=7,ea(a);case 7:s=e.sent,r("updateData",s),r("updateFileName",a.name),r("app/changeDisplayedGlyphMax",n.parsedData.length,{root:!0}),i("normalizeFeatures"),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),i("app/activateSnackbar",{text:"Reading of data file failed (possible wrong format)",color:"error",timeout:3e3},{root:!0});case 17:case"end":return e.stop()}},e,null,[[4,14]])}));function t(t,a){return e.apply(this,arguments)}return t}(),readBindingsFile:function(){var e=Object(Ne["a"])(regeneratorRuntime.mark(function e(t,a){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dispatch,i=t.commit,console.log(a),a instanceof File){e.next=4;break}throw new TypeError("Input is of type ".concat("undefined"===typeof File?"undefined":Object(Xt["a"])(File)," (expected type: File)"));case 4:return e.prev=4,e.next=7,ea(a);case 7:r=e.sent,i("storeBindings",r),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),n("app/activateSnackbar",{text:"Reading of bindings file failed (possible wrong format)",color:"error",timeout:3e3},{root:!0});case 14:case"end":return e.stop()}},e,null,[[4,11]])}));function t(t,a){return e.apply(this,arguments)}return t}(),normalizeFeatures:function(e){var t=e.commit;return t("normalizeFeatures")},setNamingField:function(e,t){var a=e.commit;return a("setNamingField",t)},orderDataByValue:function(e,t){var a=e.state,n=e.dispatch,i=e.commit;i("orderDataByValue",t),n("glyph/reassignGlyphIds",a.dataDisplayOrder,{root:!0}),n("glyph/activateRedrawing",{},{root:!0})},getArrayOfTemplates:function(){var e=Object(Ne["a"])(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,e.next=4,Qt.a.post(location.origin+"/checkForTemplates");case 4:return n=location.origin+"/data/templates.json",e.next=7,Qt.a.get(n);case 7:i=e.sent,a("setAvailableTemplates",i.data),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}));function t(t){return e.apply(this,arguments)}return t}(),saveAnnotation:function(){var e=Object(Ne["a"])(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,n=t.rootState,e.prev=1,i=location.origin+"/save",e.next=5,Qt.a.post(i,{projectImageName:n.image.projectImageName,annotationData:n.annotation.project});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0),a("app/activateSnackbar",{text:"Annotation data could not be saved",color:"error"},{root:!0});case 11:case"end":return e.stop()}},e,null,[[1,7]])}));function t(t){return e.apply(this,arguments)}return t}()},aa=(a("55dd"),a("86ec")),na={updateData:function(e,t){if(null==t||"undefined"===typeof t)throw new RangeError("Unexpected file content");var a=aa(t,{columns:!0,skip_empty_lines:!0,delimiter:","});0===a.length?console.log("Parsing failed to acquire any data"):console.log("Data:",a),e.parsedData=a},updateFileName:function(e,t){e.fileName=t},normalizeFeatures:function(e){e.dataFields=Object.keys(e.parsedData[0]);var t={},a=[];if(!(e.parsedData.length>0))throw new Error("No data available to parse");var n=!0,i=!1,r=void 0;try{for(var s,o=e.parsedData[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value,c=Object.assign({},l),p=!0,d=!1,h=void 0;try{for(var u,m=e.dataFields[Symbol.iterator]();!(p=(u=m.next()).done);p=!0){var y=u.value,f=l[y];"number"!==typeof+f||isNaN(f)?(c[y]=f,t[y]=String):(c[y]=+f,t[y]=Number)}}catch(T){d=!0,h=T}finally{try{p||null==m.return||m.return()}finally{if(d)throw h}}a.push(c)}}catch(T){i=!0,r=T}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}e.fieldTypes=t;var g={};e.dataFields.forEach(function(e){g[e]=[0,0]});for(var v=0;v<a.length;v++){var b=!0,w=!1,x=void 0;try{for(var k,G=e.dataFields[Symbol.iterator]();!(b=(k=G.next()).done);b=!0){var S=k.value;a[v][S]<g[S][0]?g[S][0]=a[v][S]:a[v][S]>g[S][1]&&(g[S][1]=a[v][S])}}catch(T){w=!0,x=T}finally{try{b||null==G.return||G.return()}finally{if(w)throw x}}}e.featuresRanges=g;for(var D=[],j=0;j<a.length;j++){var P={},O=!0,E=!1,N=void 0;try{for(var C,F=e.dataFields[Symbol.iterator]();!(O=(C=F.next()).done);O=!0){var _=C.value,B=a[j][_];P[_]="number"===typeof B?a[j][_]/(e.featuresRanges[_][1]-e.featuresRanges[_][0]):a[j][_]}}catch(T){E=!0,N=T}finally{try{O||null==F.return||F.return()}finally{if(E)throw N}}D.push(P)}e.normalizedData=D},setNamingField:function(e,t){e.namingField=t,e.dataDisplayOrder=e.normalizedData.map(function(e){return e[t]})},orderDataByValue:function(e,t){if("file entry order"===t)e.dataDisplayOrder=e.normalizedData.map(function(t){return t[e.namingField]});else{var a=e.normalizedData.map(function(e,a){return[e[t],a]});e.fieldTypes[t]===Number?a.sort(function(e,t){return e[0]-t[0]}):a.sort();var n=e.normalizedData.map(function(t){return t[e.namingField]});e.dataDisplayOrder=a.map(function(e){return n[e[1]]}),e.orderField=t}},storeBindings:function(e,t){var a=JSON.parse(t);"string"===typeof a.fileName&&Array.isArray(a.bindings)?(console.log("Bindings",a),e.loadedBindingData=a):console.log("Bindings file has wrong format")},setAvailableTemplates:function(e,t){e.availableTemplates=t}},ia=a("003c"),ra=a.n(ia),sa={fileName:"",parsedData:[],dataFields:[],fieldTypes:[],normalizedData:[],featuresRanges:{},namingField:"",loadedBindingData:{date:"",fileName:"",glyphType:"",namingField:"",bindings:[]},dataDisplayOrder:[],orderField:"file entry order",availableTemplates:[]},oa={namespaced:!0,state:sa,getters:ra.a,actions:ta,mutations:na};function la(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=0,i=!0,r=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if("undefined"===typeof c[a])throw Error("Element #".concat(n,"'s ").concat(a," attribute is undefined"));if(c[a]===e)return c;n++}}catch(p){r=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}throw Error("Could not find element with ".concat(a," '").concat(e,"'"))}var ca={setLayersUp:function(e){var t=e.rootState,a=e.commit;return a("setLayersUp",t.app.maxDisplayedGlyphs)},resetLayers:function(e){var t=e.rootState,a=e.commit;a("resetProject"),a("setLayersUp",t.app.maxDisplayedGlyphs)},setGlyphType:function(e,t){var a=e.commit;return a("setGlyphType",t)},setBindings:function(e,t){var a=e.commit;return a("setBindings",t)},addGlyphs:function(e,t){var a=e.rootState,n=e.commit;n("addGlyphs",{glyphTypeName:t,parsedData:a.backend.parsedData,namingField:a.backend.namingField})},reassignLayers:function(e,t){var a=e.commit;return a("reassignLayers",t)},removeGlyphs:function(e){var t=e.commit;return t("removeGlyphs")},reassignGlyphIds:function(e){var t=e.rootState,a=e.commit;return a("reassignGlyphIds",t.backend.dataDisplayOrder)},drawGlyph:function(e,t){var a=e.rootState,n=e.commit;t.glyphId=a.backend.dataDisplayOrder[t.glyphIndex],t.dataPoint=la(t.glyphId,a.backend.normalizedData,a.backend.namingField),n("drawGlyph",t)},moveGlyph:function(e,t){var a=e.rootState,n=e.commit;t.glyphId=a.backend.dataDisplayOrder[t.glyphIndex],n("moveGlyph",t)},activateRedrawing:function(e){var t=e.commit;t("setRedrawing",!0),setTimeout(function(){t("setRedrawing",!1)},300)},toggleGlyph:function(e,t){var a=e.commit;return a("toggleGlyph",t)},hideGlyphs:function(e){var t=e.commit;return t("hideGlyphs")},resetGlyph:function(e,t){var a=e.commit;return a("resetGlyph",t)},addCaption:function(e,t){var a=e.rootState,n=e.commit;t.caption=a.backend.dataDisplayOrder[t.glyphIndex],n("addCaption",t)},setPathParameter:function(e,t){var a=e.commit;return a("setPathParameter",t)},setShapePosition:function(e,t){var a=e.commit;return a("setShapePosition",t)},selectGlyphEl:function(e,t){var a=e.commit;return a("selectGlyphEl",t)},setBoundingRectSizeFactor:function(e,t){var a=e.commit;return a("setBoundingRectSizeFactor",t)}},pa=a("bd86"),da=(a("f559"),a("75fc"));function ha(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=0,i=!0,r=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;if("undefined"===typeof c[a])throw Error("Element #".concat(n,"'s ").concat(a," attribute is undefined"));if(c[a]===e)return c;n++}}catch(p){r=!0,s=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}throw Error("Could not find element with ".concat(a," '").concat(e,"'"))}var ua={setLayersUp:function(e,t){for(var a=0;a<t;a++){var n=new xe.a.Layer({name:"glyph".concat(a)});n.opacity=1}e.activeLayer=0,xe.a.project.layers[e.activeLayer].activate()},setGlyphType:function(e,t){var a=t.glyphTypeName,n=t.glyphSetting;e.glyphTypeName=a;var i,r=[],s=!0,o=!1,l=void 0;try{for(var c,p=e.glyphTypes[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var d=c.value;d.type.startsWith(a)&&(i=d)}}catch(h){o=!0,l=h}finally{try{s||null==p.return||p.return()}finally{if(o)throw l}}if("undefined"===typeof i)throw Error("Unknown glyph type: ".concat(a));e.glyphSettings=i.settings,e.glyphShapes=i.shapes,r.push.apply(r,Object(da["a"])(i.elements)),e.glyphElements=r,console.log("Loaded settings and elements for glyph type: ".concat(i.type)),n.length>0&&(e.selectedGlyphSetting=n)},resetProject:function(e){xe.a.project.clear(),n["default"].set(e,"project",{name:"A Phew project",glyphs:[],bindings:[]})},setBindings:function(e,t){e.project.bindings=t},addGlyphs:function(e,t){var a,n=t.parsedData,i=t.namingField,r=!0,s=!1,o=void 0;try{for(var l,c=e.glyphTypes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var p=l.value;p.type.startsWith(e.glyphTypeName)&&(a=p)}}catch(d){s=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}if("undefined"===typeof a)throw Error("Unknown glyph type: ".concat(e.glyphTypeName));e.glyphElements=a.elements,e.project.glyphs=n.map(function(e,t){return new a(t,e[i])})},reassignLayers:function(e,t){var a=t.startIndex,n=t.endIndex,i=0;e.project.glyphs=e.project.glyphs.map(function(e,t){return e.reset(),t>=a&&t<n?(e.layer=i,i++):e.layer=null,e})},reassignGlyphIds:function(e,t){return e.project.glyphs.forEach(function(e,a){e.id=t[a]})},drawGlyph:function(e,t){var a=t.boundingRect,n=t.glyphId,i=t.dataPoint,r=ha(n,e.project.glyphs);e.activeLayer=r.layer,xe.a.project.layers[e.activeLayer].activate();var s=Object(pa["a"])({boundingRect:Object.assign({},a),shapePositions:e.shapePositions},e.glyphSettings.name,e.selectedGlyphSetting);r.draw(s);var o=!0,l=!1,c=void 0;try{for(var p,d=e.project.bindings[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var h=p.value,u=void 0;if(u=r.name===h.shape?r:r.getChild(h.shape),"undefined"===typeof u)throw Error("Neither glyph ".concat(n," nor its children match shape '").concat(h.shape,"' "));if("Width"===h.element)u.scale(i[h.field]);else if("Height"===h.element)u.scale(1,i[h.field]);else try{u["draw"+h.element](i[h.field])}catch(m){throw"undefined"===typeof u["draw"+h.element]?Error("Handler for element ".concat(h.element," not defined on glyph type ").concat(u.name)):m}}}catch(y){l=!0,c=y}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}r.buildPathGroups()},moveGlyph:function(e,t){var a=t.boundingRect,n=t.glyphId,i=t.shapeSelector,r=void 0===i?"layer":i,s=ha(n,e.project.glyphs);e.activeLayer=s.layer,xe.a.project.layers[e.activeLayer].activate();var o,l,c=xe.a.view.element.getBoundingClientRect();if("layer"===r)o=xe.a.project.layers[e.activeLayer],l=s.mainPath;else{var p;if(p=s.constructor.shapes.main===r?s:s.getChild(r),"undefined"===typeof p)throw Error("Could not find shape '".concat(r,"'"));o=p.group,l=p.mainPath}o.translate(new xe.a.Point(a.left-c.left+a.width/2-l.position.x,a.top-c.top+a.height/2-l.position.y));var d=(a.width+a.height)/2,h=d*(l.size[1]/l.size[0]);o.scale(d/l.size[0],h/l.size[1]),l.size=[d,h]},setRedrawing:function(e,t){e.redrawing=t},toggleGlyph:function(e,t){var a=t.glyphIndex,n=t.value;e.activeLayer=a;var i=xe.a.project.layers[e.activeLayer];i.activate(),i.visible=n},hideGlyphs:function(e){for(var t=0;t<e.numDisplayedGlyphs;t++){e.activeLayer=t;var a=xe.a.project.layers[e.activeLayer];a.activate(),a.visible=!1}},showGlyphs:function(e){for(var t=0;t<e.numDisplayedGlyphs;t++){e.activeLayer=t;var a=xe.a.project.layers[e.activeLayer];a.activate(),a.visible=!0}},resetGlyph:function(e,t){return e.project.glyphs[t].reset()},addCaption:function(e,t){var a=t.glyphIndex,n=(t.boundingRect,t.caption);e.activeLayer=a;var i=e.project.glyphs[a].mainPath.bounds,r=i.x,s=i.y,o=i.width,l=i.height;n=new xe.a.PointText({point:[r+o/10,s+1.15*l],content:n,fillColor:"gray",fontSize:14})},setPathParameter:function(e,t){var a,n=t.parameter,i=t.value,r=t.shapeName,s=t.elementName,o=!0,l=!1,c=void 0;try{for(var p,d=e.project.glyphs[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var h=p.value;if(a=h.drawn&&h.name===r?h:h.getChild(r),a&&a.drawn){var u=a.getNamedPaths(!0);u[s.toLowerCase()][n]=i;var m=s.toLowerCase()+n[0].toUpperCase()+n.slice(1);a.parameters[m]=i}}}catch(y){l=!0,c=y}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}},setShapePosition:function(e,t){var a=t.shapeName,n=t.position,i=e.shapePositions;i[a]=n,e.shapePositions=i},selectGlyphEl:function(e,t){e.selection=t},addChildGlyph:function(e,t){var a,n=t.glyphId,i=t.childName,r=!0,s=!1,o=void 0;try{for(var l,c=e.glyphTypes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var p=l.value;p.type.startsWith(e.glyphTypeName)&&(a=p)}}catch(h){s=!0,o=h}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}if("undefined"===typeof a)throw Error("Unknown glyph type: ".concat(e.glyphTypeName));var d=ha(n,e.project.glyphs);d.registerChild(new a(i))}},ma=a("b326"),ya=a.n(ma),fa=a("d225"),ga=a("b0b4"),va=a("308d"),ba=a("6bb5"),wa=a("2a88"),xa=a("4e2b"),ka=(a("7514"),a("8615"),a("db97"),a("5df3"),a("4f7f"),function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.baseOptions(),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;for(var s in Object(fa["a"])(this,e),Object(pa["a"])(this,"parameters",{}),Object(pa["a"])(this,"glyphElements",e.elements),Object(pa["a"])(this,"drawn",!1),Object(pa["a"])(this,"pathIds",{}),Object(pa["a"])(this,"drawnPaths",new Set),Object(pa["a"])(this,"children",[]),Object(pa["a"])(this,"box",{canvasRect:{top:0,bottom:0,left:0,right:0},bounds:{top:0,bottom:0,left:0,right:0},center:{x:0,y:0},shapePositions:{}}),i)this.parameters[s]=i[s];if(this.layer=t,this.id=a,this.name=n||(null===r?this.constructor.shapes.main:this.children[this.parent.children.length]||""),null!==r&&r.layer!==this.layer)throw Error("Child ".concat(this.name,"'s layer (").concat(this.layer,") differs from parent ").concat(r.name,"'s layer (").concat(r.layer));this.parent=r,xe.a.project.layers[this.layer].activate(),this.group=new xe.a.Group([])}return Object(ga["a"])(e,null,[{key:"baseOptions",value:function(){return{backend:"paper",strokeColor:"#78909C",primaryColor:"#00897B",secondaryColor:"#F50057",lightColor:"#E1F5FE",darkColor:"#880E4F",strokeWidth:1,thickPathSize:6,narrowPathSize:3}}}]),Object(ga["a"])(e,[{key:"activateLayer",value:function(){xe.a.project.layers[this.layer].activate()}},{key:"getDrawingBox",value:function(e){var t=e.boundingRect,a=e.shapePositions,n=xe.a.view.element.getBoundingClientRect();if("undefined"!==typeof a[this.name.toLowerCase()]){var i=a[this.name.toLowerCase()],r=i.topShift,s=i.leftShift,o=i.widthProportion,l=i.heightProportion;t.top+=r*t.height,t.left+=s*t.width,t.width*=o,t.height*=l}return{canvasRect:n,bounds:t,center:{x:t.left-n.left+t.width/2,y:t.top-n.top+t.height/2},shapePositions:a}}},{key:"draw",value:function(e){if(this.box=this.getDrawingBox(e),null===this.layer)throw Error("Cannot draw glyph ".concat(this.id," with null layer"));if(!Object.is(xe.a.project.layers[this.layer],xe.a.project.activeLayer))throw Error("Cannot set glyph: Active layer '".concat(xe.a.project.activeLayer.name,"' differs from glyph layer '").concat(xe.a.project.layers[this.layer].name,"'"));var t=xe.a.Path.Rectangle({center:[this.box.center.x,this.box.center.y],size:[this.box.bounds.width,this.box.bounds.height],strokeColor:"black",strokeWidth:5,visible:!1});this.registerPath(t,"drawingBox"),this.drawn=!0}},{key:"buildPathGroups",value:function(){var e=this.getNamedPaths(!1),t=[];Object.values(e).forEach(function(e){return t.push(e)}),this.group=new xe.a.Group(t),this.children.forEach(function(e){return e.buildPathGroups()})}},{key:"registerPath",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.pathIds[t]=e.id,this.drawnPaths.add(t),e.name=t}},{key:"getPath",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.shapes.main,a=function(a){return a.find(function(a){return a.id===e.pathIds[t]&&a.name===t})},n=this.group.children,i=a(n);if("undefined"===typeof i&&(n=xe.a.project.layers[this.layer].children,i=a(n)),"undefined"===typeof i)throw new Error("Either id or name did not match the tracked id (".concat(this.pathIds[t],") / name (").concat(t,")"));return i}},{key:"deletePath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.shapes.main,t=!1,a=this.pathIds[e];if(null!==a){var n=!0,i=!1,r=void 0;try{for(var s,o=xe.a.project.layers[this.layer].children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;if(l.id===a){l.remove(),this.pathIds[e]=null,t=!0;break}}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}if(null!==a&&!t)throw new Error("Either id or name did not match the tracked id (".concat(this.pathIds[e],") / name (").concat(e,")"))}},{key:"getNamedPaths",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a={};a[this.constructor.shapes.main]=this.getPath(this.constructor.shapes.main);var n=!0,i=!1,r=void 0;try{for(var s,o=function(){var n=s.value,i=void 0;if(n.target===e.constructor.shapes.main)i=e;else{if(!t)return"continue";i=e.children.find(function(e){return e.name===n.target})}if("undefined"===typeof i)throw Error("Neither main glyph nor children names matched element's target '".concat(n.target,"' "));var r=n.name.toLowerCase();if("path"===n.type&&e.drawnPaths.has(r)){var o=n.name.toLowerCase(),l=e.getPath(o);a[o]=l}},l=this.glyphElements[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)o()}catch(c){i=!0,r=c}finally{try{n||null==l.return||l.return()}finally{if(i)throw r}}return a}},{key:"clonePath",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.shapes.main,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=this.getPath(e),n=new xe.a.Path,i=a.length/t,r=0;r<t;r++)n.add(a.getLocationAt(i*r));return n}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e>1||t>1)throw Error("Cannot scale by factor greater than 1");0===e&&(e+=.05),0===t&&(t+=.05),this.activateLayer(),xe.a.project.layers[this.layer].scale(e,t)}},{key:"reset",value:function(){if(this.drawn){if(null===this.parent)xe.a.project.layers[this.layer].removeChildren(),this.pathIds={},this.drawnPaths=new Set;else for(var e in this.pathIds)this.pathIds.hasOwnProperty(e)&&this.deletePath(e);this.children=[],this.drawn=!1,this.activateLayer(),this.group=new xe.a.Group([])}}},{key:"registerChild",value:function(e){if(e.id||(e.id="".concat(this.children.length-1)),e.layer!==this.layer)throw Error("Child ".concat(e.name,"'s layer (").concat(e.layer,") differs from parent ").concat(this.name,"'s layer (").concat(this.layer));e.parent=this,this.children.push(e);var t=!0,a=!1,n=void 0;try{for(var i,r=e.constructor.elements[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;"scale"!==s.type&&(this["draw".concat(e.name).concat(s.name)]=e["draw".concat(s.name)].bind(e))}}catch(l){a=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}if(e.drawn)for(var o in e.pathIds)e.pathIds.hasOwnProperty(o)&&(this.pathIds[e.name+"-"+o]=e.pathIds[o]);else console.warn("Passed glyph '".concat(e.name,"' has not been drawn"))}},{key:"getChild",value:function(e){try{return this.children.find(function(t){return t.name===e})}catch(t){throw Error("Glyph ".concat(this.name," has no children named '").concat(e,"'"))}}},{key:"deleteChild",value:function(e){var t;for(t=0;t<this.children.length;t++)if(this.children[t]===e)return t;throw delete this.children[t],Error("Glyph ".concat(this.name," has no children named '").concat(e,"'"))}},{key:"group",set:function(e){if(!Object.is(xe.a.project.layers[this.layer],xe.a.project.activeLayer))throw Error("Cannot set glyph: Active layer '".concat(xe.a.project.activeLayer.name,"' differs from glyph layer '").concat(xe.a.project.layers[this.layer].name,"'"));var t=xe.a.project.layers[this.layer].children,a=this.name+"Group",n=t.find(function(e){return e.name===a});"undefined"!==typeof n&&n.replaceWith(e),e.name=a},get:function(){var e=xe.a.project.layers[this.layer].children,t=this.name+"Group",a=e.find(function(e){return e.name===t});return"undefined"===typeof a&&console.warn("No group in layer ".concat(this.layer," matched name '").concat(t,"'.")),a}},{key:"mainPath",set:function(e){this.registerPath(e,this.constructor.shapes.main)},get:function(){return this.getPath(this.constructor.shapes.main)}}],[{key:"type",get:function(){return"BaseGlyph"}},{key:"settings",get:function(){return{name:"",message:"",options:[]}}},{key:"shapes",get:function(){return{main:"main",children:[]}}},{key:"elements",get:function(){return[{name:"Height",type:"scale",properties:[],target:"main",subElements:[]},{name:"Width",type:"scale",properties:[],target:"main",subElements:[]}]}}]),e}()),Ga=ka,Sa=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(y["a"])({},t.baseOptions(),{numSides:6,numPoints:250,spikeHeight:.3,meshType:"grid"});return Object(fa["a"])(this,t),n=Object(va["a"])(this,Object(ba["a"])(t).call(this,e,a,i,r)),n.glyphElements=t.elements,n.pathIds=Object(y["a"])({},n.pathIds,{membrane:null,spikes:null,protrusion:null,mesh:null}),n}return Object(xa["a"])(t,e),Object(ga["a"])(t,[{key:"draw",value:function(e){var a,n=e.shapeType;switch("undefined"===typeof n&&(n="ellipse"),this.activateLayer(),Object(wa["a"])(Object(ba["a"])(t.prototype),"draw",this).call(this,e),n){case"ellipse":a=new xe.a.Path.Ellipse({center:[this.box.center.x,this.box.center.y],size:[this.box.bounds.width,this.box.bounds.height],strokeColor:this.parameters.strokeColor,fillColor:this.parameters.lightColor,strokeWidth:this.parameters.strokeWidth});break;case"rectangle":a=new xe.a.Path.Rectangle({center:[this.box.center.x,this.box.center.y],size:[this.box.bounds.width,this.box.bounds.height],strokeColor:this.parameters.strokeColor,fillColor:this.parameters.lightColor,strokeWidth:this.parameters.strokeWidth});break;case"circle":a=new xe.a.Path.Circle({center:[this.box.center.x,this.box.center.y],radius:Math.min(this.box.bounds.width,this.box.bounds.height),strokeColor:this.parameters.strokeColor,fillColor:this.parameters.lightColor,strokeWidth:this.parameters.strokeWidth});break;case"regularPolygon":a=new xe.a.Path.RegularPolygon({center:[this.box.center.x,this.box.center.y],sides:this.numSides,radius:Math.min(this.box.bounds.width,this.box.bounds.height),strokeColor:this.parameters.strokeColor,fillColor:this.parameters.lightColor,strokeWidth:this.parameters.strokeWidth});break;default:throw Error("Unknown shape type '".concat(n,"'"))}this.mainPath=a}},{key:"drawMembrane",value:function(e,t){if(!(e>=0||e<=1))throw Error("Invalid membrane fraction ".concat(e,", it must be in [0, 1] ("));this.activateLayer();for(var a=new xe.a.Path,n=0;n<Math.floor(this.parameters.numPoints*e);n++)a.add(this.mainPath.getLocationAt(this.mainPath.length*(1-n/this.parameters.numPoints)));a.strokeColor=this.parameters.primaryColor,a.strokeWidth=this.parameters.thickPathSize,this.registerPath(a,"membrane")}},{key:"drawSpikes",value:function(e,t){var a=t.spikeHeight,n=t.numPoints;"undefined"===typeof a&&(a=this.parameters.spikeHeight),"undefined"===typeof n&&(n=this.parameters.numPoints);var i=this.clonePath("main",n);i.visible=!1;for(var r=Math.floor(i.segments.length*e),s=new xe.a.Path,o=0;o<r;o++){var l=[0,0],c=i.segments[o].point.x-this.mainPath.position.x,p=i.segments[o].point.y-this.mainPath.position.y;o%2===1&&o!==r-1?(l[0]=c*a,l[1]=p*a):o>0&&o<n-1&&(l=[.35*l[0],.35*l[1]]);var d=new xe.a.Point(i.segments[o].point.x+l[0],i.segments[o].point.y+l[1]);s.add(d)}s.strokeColor=this.parameters.secondaryColor,s.strokeWidth=this.parameters.narrowPathSize,this.registerPath(s,"spikes")}},{key:"drawProtrusion",value:function(e,t){for(var a=this.clonePath("main",this.parameters.numPoints),n=0;n<a.segments.length;n++)a.segments[n].point.y<this.mainPath.position.y&&(a.segments[n].point.y=a.segments[n].point.y*(1-e));a.strokeWidth=this.parameters.strokeWidth,a.strokeColor=this.parameters.strokeColor,a.fillColor=this.parameters.lightColor,a.visible=!0,a.closed=!0,a.insertBelow(this.mainPath)}},{key:"drawMesh",value:function(e,t){for(var a,n=Math.floor(2*Math.exp(3*e)),i=[],r=0;r<n;r++)switch(this.parameters.meshType){case"grid":case"vertical":if(a=(this.mainPath.bounds.right-this.mainPath.bounds.left)/n,i.push(new xe.a.Path.Line(new xe.a.Point(this.mainPath.bounds.left+(r+.5)*a,this.mainPath.bounds.top),new xe.a.Point(this.mainPath.bounds.left+(r+.5)*a,this.mainPath.bounds.bottom))),"grid"!==this.parameters.meshType)break;case"horizontal":a=(this.mainPath.bounds.bottom-this.mainPath.bounds.top)/n,i.push(new xe.a.Path.Line(new xe.a.Point(this.mainPath.bounds.left,this.mainPath.bounds.top+(r+.5)*a),new xe.a.Point(this.mainPath.bounds.right,this.mainPath.bounds.top+(r+.5)*a)));break;case"random":throw Error("Random grid not implemented");default:throw Error("Unknown mesh type ".concat(this.parameters.meshType))}for(var s=new xe.a.Group([]),o=0,l=i;o<l.length;o++)for(var c=l[o],p=c.getIntersections(this.mainPath),d=0;d+1<p.length;d+=2)s.addChild(xe.a.Path.Line(p[d].point,p[d+1].point));s.strokeColor=this.parameters.darkColor,s.strokeWidth=this.parameters.strokeWidth,s.bringToFront(),this.registerPath(s,"mesh")}}],[{key:"type",get:function(){return"ShapeGlyph"}},{key:"settings",get:function(){return{name:"shapeType",message:"Select glyph shape",options:["ellipse","rectangle","circle","regularPolygon"]}}},{key:"shapes",get:function(){return{main:"main",children:[]}}},{key:"elements",get:function(){return[{name:"Height",type:"scale",properties:[],target:"main",subElements:[]},{name:"Width",type:"scale",properties:[],target:"main",subElements:[]},{name:"Membrane",type:"path",properties:{color:{range:[],step:[]},size:{range:[1,30],step:1}},target:"main",subElements:[]},{name:"Spikes",type:"path",properties:{color:{range:[],step:[]},size:{range:[1,15],step:1}},target:"main",subElements:["SpikeHeight","NumberOfPoints"]},{name:"Protrusion",type:"path",properties:{color:{range:[],step:[]},size:{range:[1,20],step:1}},target:"main",subElements:[]},{name:"Mesh",type:"path",properties:{color:{range:[],step:[]},size:{range:[.3,1.5],step:.3}},target:"main",subElements:[]}]}}]),t}(Ga),Da=Sa,ja=function(e){function t(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(y["a"])({},t.baseOptions(),{membraneFraction:.5,membraneSize:"",numPoints:300,spikeHeight:.3,meshType:"grid"});return Object(fa["a"])(this,t),n=Object(va["a"])(this,Object(ba["a"])(t).call(this,e,a,i,r)),n.glyphElements=t.elements,n.pathIds=Object(y["a"])({},n.pathIds,{membrane:null,spikes:null,protrusion:null,mesh:null}),n}return Object(xa["a"])(t,e),Object(ga["a"])(t,[{key:"draw",value:function(e){if(e.shapeType="ellipse",Object(wa["a"])(Object(ba["a"])(t.prototype),"draw",this).call(this,e),this.activateLayer(),e.drawNucleus){e.shapePositions.nucleus={topShift:.25,leftShift:.25,widthProportion:.5,heightProportion:.5},this.box=this.getDrawingBox(e);var a={backend:"paper",strokeColor:"#283593",primaryColor:"#AB47BC",secondaryColor:"#D4E157",lightColor:"#1E88E5",darkColor:"#66BB6A",strokeWidth:2,thickPathSize:7,narrowPathSize:4,numSides:6,numPoints:250,spikeHeight:.3,meshType:"grid"},n=new Da(this.layer,"0","Nucleus",a,this);n.draw(e),this.registerChild(n)}}}],[{key:"type",get:function(){return"CellGlyph"}},{key:"settings",get:function(){return{name:"drawNucleus",message:"Draw nucleus",options:["Yes","No"]}}},{key:"shapes",get:function(){return{main:"Cell",children:["Nucleus"]}}},{key:"elements",get:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var i,r=Da.elements[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;s.target="Cell",e.push(s)}}catch(u){a=!0,n=u}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}var o=!0,l=!1,c=void 0;try{for(var p,d=Da.elements[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var h=p.value;h.target="Nucleus",e.push(h)}}catch(u){l=!0,c=u}finally{try{o||null==d.return||d.return()}finally{if(l)throw c}}return e}}]),t}(Da),Pa=ja,Oa={glyphTypes:[Pa,Da],glyphTypeName:"",project:{name:"A new phew project",bindings:[],glyphs:[],captions:[],template:{}},activeLayer:null,selection:{layer:0,path:""},glyphSettings:{name:"",message:"",options:[]},glyphShapes:{main:"",children:[]},glyphElements:[],selectedGlyphSetting:"",redrawing:!1,shapePositions:{}},Ea={namespaced:!0,state:Oa,getters:ya.a,actions:ca,mutations:ua};n["default"].use(f["a"]);var Na=new f["a"].Store({strict:!0,modules:{app:Kt,backend:oa,glyph:Ea}}),Ca=a("ce5b"),Fa=a.n(Ca);a("bf40"),a("d1e7");n["default"].use(Fa.a,{theme:{light:"#EEEEEE",dark:"#424242",primary:"#673AB7",secondary:"#D1C4E9",accent:"#651FFF"}}),n["default"].use(i["a"]),n["default"].config.productionTip=!1,window.arrayIter=Array.prototype[Symbol.iterator],new n["default"]({el:"#app",router:Ut,store:Na,components:{App:d},template:"<App/>"})},"580d":function(e,t,a){"use strict";var n=a("ba2e"),i=a.n(n);i.a},"5abf":function(e,t,a){},"745e":function(e,t,a){},"78aa":function(e,t,a){},"7bef":function(e,t,a){},"852a":function(e,t,a){"use strict";var n=a("4679"),i=a.n(n);i.a},"940b":function(e,t,a){},"9f85":function(e,t,a){"use strict";var n=a("4212"),i=a.n(n);i.a},ac4f:function(e,t,a){},b326:function(e,t){},b63d:function(e,t,a){"use strict";var n=a("d3b0"),i=a.n(n);i.a},ba2e:function(e,t,a){},c892:function(e,t,a){"use strict";var n=a("78aa"),i=a.n(n);i.a},c9eb:function(e,t){},cf26:function(e,t,a){"use strict";var n=a("940b"),i=a.n(n);i.a},d299:function(e,t,a){"use strict";var n=a("2096"),i=a.n(n);i.a},d3b0:function(e,t,a){},e4bd:function(e,t,a){},f4f4:function(e,t,a){"use strict";var n=a("7bef"),i=a.n(n);i.a},ffcb:function(e,t,a){"use strict";var n=a("5abf"),i=a.n(n);i.a}});
//# sourceMappingURL=app.47393d0c.js.map